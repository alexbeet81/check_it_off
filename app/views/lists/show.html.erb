<%= render 'shared/navbar' %>
<h1>
    <%= @list.name %>
</h1>

<%= simple_form_for([@list, @category]) do |f| %>
    <%= f.input :category_name %>
    <%= f.submit "add category" %>
<% end %>

<% @list.categories.each do |category| %>
    <h3>
        Category: <%= category.category_name %>
        <%= link_to "delete category", category_path(category), method: :delete, data: { confirm: "Are you quite sure?" } %>

        <%= simple_form_for(category) do |f| %>
          <%= f.input :category_name %>
          <%= f.submit "edit category" %>
        <% end %>

        <% category.items.each do |item| %>
            <p>
                Item: <%= item.item_name %>
                <%= link_to "delete item", item_path(item), method: :delete %>
                <%= simple_form_for(item) do |f| %>
                  <%= f.input :item_name %>
                  <%= f.submit "edit item" %>
                <% end %>
            </p>
        <% end %>
        <%= simple_form_for([@list, category, @item]) do |f| %>
            <%= f.input :item_name %>
            <%= f.submit "add item" %>
        <% end %>
    </h3>
<% end %>

<%= link_to "Go Shopping!", list_shopping_path(@list) %>

  <button type="button" class="btn-long list-button-flex" data-toggle="modal" data-target="#addListModal">
    <i class="fas fa-plus"></i>
    <h2>list</h2>
  </button>

<div id="addListModal" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">name your list</h5>
        </button>
      </div>
      <div class="modal-body">
        <%= simple_form_for(@list) do |f| %>
        <%= f.input :name, label: false %>
      </div>
      <div class="modal-footer">
        <%= f.submit "add list", class: "btn btn-flat" %>
      </div>
      <% end %>
    </div>
  </div>
</div>